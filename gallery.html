<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Gallery — Alexander Ortiz</title>

    <!-- Fonts & Icons (same family used site-wide) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;800&display=swap"
      rel="stylesheet"
    />

    <meta
      name="description"
      content="Projects by Alexander Ortiz — gallery with search and filters"
    />

    <style>
      /* ==============================
       THEME TOKENS (WHITE + ORANGE)
       ============================== */
      :root {
        --bg: #ffffff;
        --surface: #ffffff;
        --border: #e9edf2;
        --text: #0f172a;
        --muted: #5b6472;
        --accent: #ff7a00;
        --accent-600: #e56e00;
        --accent-50: #fff3e8;
        --ring: #ffb26b;
        --shadow-1: 0 6px 18px rgba(17, 17, 17, 0.06);
        --shadow-2: 0 10px 30px rgba(17, 17, 17, 0.08);
        --radius-lg: 16px;
        --radius-md: 12px;
        --radius-sm: 10px;
        --h1: clamp(26px, 3.8vw, 34px);
        --h4: clamp(16px, 2vw, 18px);
        --small: 13.5px;
        --easing: cubic-bezier(0.2, 0.7, 0.2, 1);
        --dur-1: 160ms;
        --dur-2: 260ms;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Roboto", system-ui, -apple-system, "Segoe UI", Arial,
          sans-serif;
        background: var(--bg);
        color: var(--text);
        line-height: 1.55;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        position: relative;
      }

      /* Subtle page vignettes for depth */
      body::before,
      body::after {
        content: "";
        position: fixed;
        left: 0;
        right: 0;
        height: 220px;
        pointer-events: none;
        z-index: 0;
      }

      body::before {
        top: 0;
        background: linear-gradient(
          to bottom,
          rgba(255, 122, 0, 0.07),
          transparent 65%
        );
      }

      body::after {
        bottom: 0;
        background: linear-gradient(
          to top,
          rgba(255, 122, 0, 0.05),
          transparent 60%
        );
      }

      .container {
        max-width: 1100px;
        margin: 0 auto;
        padding: 28px clamp(18px, 3.2vw, 28px);
        position: relative;
        z-index: 1;
        /* above vignettes */
      }

      /* ==============================
       HEADER & NAV
       ============================== */
      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        margin-bottom: 8px;
        position: sticky;
        top: 0;
        z-index: 100;
        background-color: var(--bg);
        padding: 1em;
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .logo {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: grid;
        place-items: center;
        font-weight: 800;
        letter-spacing: 0.3px;
        background: linear-gradient(135deg, var(--accent), #ff9e37);
        color: #2b1700;
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6),
          0 6px 18px rgba(255, 122, 0, 0.25);
      }

      nav {
        display: flex;
        gap: 10px;
        padding: 4px;
        border-radius: 999px;
        background: #f7f9fc;
        border: 1px solid var(--border);
        box-shadow: var(--shadow-1);
      }

      nav a {
        color: var(--muted);
        text-decoration: none;
        padding: 8px 14px;
        border-radius: 999px;
        transition: color var(--dur-1) var(--easing),
          background var(--dur-1) var(--easing),
          transform var(--dur-1) var(--easing);
        outline: none;
      }

      nav a:hover {
        color: var(--text);
        background: #fff;
      }

      nav a.active {
        color: #2b1700;
        background: linear-gradient(135deg, var(--accent), #ff9e37);
        box-shadow: 0 6px 16px rgba(255, 122, 0, 0.25);
      }

      nav a:focus-visible {
        box-shadow: 0 0 0 3px var(--ring);
        background: #fff;
        color: var(--text);
      }

      .menu-toggle {
        display: none;
        background: none;
        border: 0;
        color: var(--muted);
        cursor: pointer;
        padding: 6px;
        border-radius: 10px;
      }

      .menu-toggle:focus-visible {
        outline: none;
        box-shadow: 0 0 0 3px var(--ring);
      }

      /* ==============================
       CONTROLS (search + filter chips)
       ============================== */
      .controls {
        display: flex;
        gap: 12px;
        align-items: center;
        margin-top: 18px;
        margin-bottom: 14px;
        flex-wrap: wrap;
      }

      .search {
        flex: 1;
        min-width: 220px;
      }

      input[type="search"] {
        width: 100%;
        min-width: 135px;
        padding: 10px 12px;
        border-radius: var(--radius-md);
        border: 1px solid var(--border);
        background: #fff;
        color: var(--text);
        transition: box-shadow var(--dur-1) var(--easing),
          border-color var(--dur-1) var(--easing),
          transform var(--dur-1) var(--easing);
      }

      input[type="search"]:focus {
        outline: none;
        border-color: #ffd5b0;
        transform: translateY(-1px);
        box-shadow: var(--shadow-1);
      }

      .filters {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .chip {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 999px;
        background: #fff;
        border: 1px solid var(--border);
        color: var(--muted);
        font-weight: 600;
        font-size: 13px;
        cursor: pointer;
        user-select: none;
        transition: transform var(--dur-1) var(--easing),
          box-shadow var(--dur-1) var(--easing),
          background var(--dur-1) var(--easing),
          color var(--dur-1) var(--easing),
          border-color var(--dur-1) var(--easing);
      }

      .chip:hover {
        transform: translateY(-2px);
        background: var(--accent-50);
        border-color: #ffd5b0;
        color: var(--text);
        box-shadow: var(--shadow-1);
      }

      .chip:focus {
        outline: 3px solid var(--ring);
        outline-offset: 2px;
      }

      .chip.active {
        color: #2b1700;
        background: linear-gradient(135deg, var(--accent), #ff9e37);
        border-color: transparent;
        box-shadow: 0 12px 30px rgba(255, 122, 0, 0.22);
        transform: translateY(-3px);
      }

      .chip .check {
        width: 14px;
        height: 14px;
        border-radius: 3px;
        display: inline-grid;
        place-items: center;
        font-size: 11px;
        opacity: 0;
        transform: scale(0.85);
        transition: opacity var(--dur-1) var(--easing),
          transform var(--dur-1) var(--easing);
      }

      .chip.active .check {
        opacity: 1;
        transform: scale(1);
      }

      /* ==============================
       GRID & CARDS
       ============================== */
      .grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
      }

      .card {
        background: var(--surface);
        padding: 16px;
        border-radius: var(--radius-lg);
        border: 1px solid var(--border);
        box-shadow: var(--shadow-2);
        transition: transform var(--dur-1) var(--easing),
          box-shadow var(--dur-1) var(--easing),
          opacity var(--dur-1) var(--easing);
      }

      .card:hover {
        transform: translateY(-6px);
        box-shadow: 0 18px 40px rgba(17, 17, 17, 0.12);
      }

      .card h4 {
        margin: 0 0 6px 0;
        font-size: var(--h4);
      }

      .muted {
        color: var(--muted);
        font-size: 14px;
      }

      .stacks {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
        margin-top: 12px;
      }

      .stack {
        font-size: 12px;
        background: #fff;
        padding: 6px 8px;
        border-radius: 999px;
        color: var(--muted);
        border: 1px solid var(--border);
      }

      .controls-bottom {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 12px;
        color: var(--muted);
        font-size: var(--small);
      }

      .hidden {
        opacity: 0;
        transform: scale(0.98);
        pointer-events: none;
        height: 0;
        padding: 0;
        margin: 0;
      }

      /* ==============================
       BUTTON (for "View More Details" inside cards)
       ============================== */
      .btn-more {
        appearance: none;
        border: 1px solid #ffd5b0;
        background: #fff;
        color: var(--accent-600);
        border-radius: 12px;
        padding: 8px 12px;
        font-weight: 700;
        cursor: pointer;
        transition: transform var(--dur-1) var(--easing),
          box-shadow var(--dur-1) var(--easing),
          background var(--dur-1) var(--easing),
          color var(--dur-1) var(--easing);
      }

      .btn-more:hover {
        transform: translateY(-1px);
        background: var(--accent-50);
        box-shadow: var(--shadow-1);
      }

      /* ==============================
       MODAL
       ============================== */
      .modal {
        position: fixed;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(15, 23, 42, 0.35);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        opacity: 0;
        pointer-events: none;
        transition: opacity var(--dur-1) var(--easing);
        z-index: 40;
      }

      .modal.open {
        opacity: 1;
        pointer-events: auto;
      }

      .modal .dialog {
        background: var(--surface);
        padding: 18px;
        border-radius: var(--radius-lg);
        max-width: 820px;
        width: 100%;
        box-shadow: 0 16px 45px rgba(17, 17, 17, 0.14);
        border: 1px solid var(--border);
        position: relative;
      }

      .modal .dialog h3 {
        margin-top: 0;
      }

      .close {
        position: absolute;
        right: 10px;
        top: 10px;
        background: #fff;
        border: 1px solid var(--border);
        color: var(--muted);
        font-size: 16px;
        line-height: 1;
        border-radius: 10px;
        cursor: pointer;
        padding: 6px 10px;
      }

      .close:hover {
        background: var(--accent-50);
        color: var(--text);
        border-color: #ffd5b0;
      }

      /* Links inside modal footer */
      #modalLinks .chip {
        text-decoration: none;
      }

      /* ==============================
       RESPONSIVE
       ============================== */
      .mobile-nav {
        display: none;
      }

      @media (max-width: 980px) {
        .grid {
          grid-template-columns: repeat(2, 1fr);
        }

        nav {
          display: none;
        }

        .menu-toggle {
          display: inline-block;
        }

        .mobile-nav.open {
          display: block;
          margin-top: 12px;
          padding: 12px;
          border-radius: var(--radius-md);
          background: #fff;
          border: 1px solid var(--border);
          box-shadow: var(--shadow-1);
          position: sticky;
          top: 83px;
          z-index: 100;
        }

        .mobile-nav nav {
          background-color: transparent;
          border: none;
          box-shadow: none;
        }

        .mobile-nav nav a {
          padding: 10px 12px;
          border-radius: 10px;
          display: block;
          color: var(--muted);
          text-decoration: none;
        }

        .mobile-nav nav a:hover {
          background: var(--accent-50);
          color: var(--text);
        }
      }

      @media (max-width: 640px) {
        .grid {
          grid-template-columns: 1fr;
        }

        .controls {
          flex-direction: column;
          align-items: stretch;
        }
      }

      /* Reduced motion */
      @media (prefers-reduced-motion: reduce) {
        * {
          transition: none !important;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <header>
        <div class="brand">
          <a href="/" style="text-decoration: none; color: inherit">
            <div class="logo">AO</div>
          </a>
          <div>
            <div style="font-weight: 700">Alexander Ortiz</div>
            <div style="font-size: 12px; color: var(--muted)">
              Projects & Gallery
            </div>
          </div>
        </div>
        <div>
          <button
            class="menu-toggle"
            aria-expanded="false"
            aria-controls="mobile-nav"
            aria-label="Open navigation"
          >
            <img src="/icons/hamburger.svg" alt="" width="30" height="30" />
          </button>
          <nav>
            <a href=".">Home</a>
            <a href="about.html">About</a>
            <a href="gallery.html" class="active">Gallery</a>
            <a href="contact.html">Contact</a>
          </nav>
        </div>
      </header>

      <div class="controls">
        <div class="search">
          <input
            id="search"
            type="search"
            placeholder="Search projects (name, summary, stack)..."
          />
        </div>
        <div
          id="filterContainer"
          class="filters"
          aria-label="Project filters"
        ></div>
      </div>

      <div id="grid" class="grid" aria-live="polite"></div>

      <div class="controls-bottom">
        <span>Showing <strong id="count"></strong> projects</span>
      </div>
    </div>

    <!-- modal for project details -->
    <div
      id="modal"
      class="modal"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
    >
      <div class="dialog" role="document">
        <button class="close" id="closeModal" aria-label="Close">✕</button>
        <h3 id="modalTitle"></h3>
        <div id="modalBody" class="muted"></div>
        <div id="modalLinks" style="margin-top: 12px"></div>
      </div>
    </div>

    <script>
      // Projects seeded from your resume file (same as your original gallery data)
      const projects = [
        {
          name: "Chrome DevTools Protocol Desktop Client",
          summary:
            "PyQt5 GUI for CDP with predefined commands, command editor, and live execution.",
          highlights: [
            "Target discovery/attach, JSON viewer, response timing, and saved sessions.",
            "Schema-driven autocomplete for methods/params.",
          ],
          stack: ["Python", "PyQt5", "WebSockets (CDP)"],
          featured: true,
          repo_url: "",
        },
        {
          name: "Cattle Management App",
          summary:
            "Full-stack herd management: React front end + Supabase backend.",
          highlights: [
            "Tracks animals, weights, health events, and breeding cycles;",
            "Auth, row-level security, CSV import/export.",
          ],
          stack: ["React", "Supabase (Postgres)", "SQL"],
          featured: true,
          repo_url: "",
          live_url: "",
        },
        {
          name: "Chess Desktop Suite",
          summary:
            "Play positions, load/edit FEN/PGN, run engine analysis, and search PGN DBs via CQL.",
          highlights: [
            "Async engine integration (UCI) and fast CQL search over large databases.",
          ],
          stack: ["Python", "PyQt5", "CQL"],
          featured: true,
          repo_url: "",
        },
        {
          name: "WordSearch: Generator · Solver · Game",
          summary: "Algorithmic generator, instant solver, and playable UI.",
          highlights: [
            "Backtracking generator with difficulty levels; multilingual support;",
            "PNG/PDF exports and seeded reproducibility.",
          ],
          stack: ["Python", "PyQt5"],
          featured: false,
          repo_url: "",
        },
        {
          name: "Chess Puzzles Web App",
          summary: "Web app for solving chess puzzles with ChessGround.",
          highlights: [
            "Step/hint controls, legal-move validation, and FEN/PGN import.",
          ],
          stack: ["JavaScript", "ChessGround"],
          featured: false,
          repo_url: "https://gol",
          live_url: "https://",
        },
        {
          name: "Cattle CRUD API",
          summary:
            "Service layer for cattle data with normalized schema and JWT auth.",
          highlights: [
            "Pagination, validation, and audit logging; designed for multiple clients.",
          ],
          stack: ["Node.js", "Express", "Postgres"],
          featured: false,
          repo_url: "",
        },
      ];

      // Read any manual project markup added to the page (.project-data elements)
      document.querySelectorAll(".project-data").forEach((el) => {
        const p = {
          name: el.getAttribute("data-name") || "Untitled",
          summary: el.getAttribute("data-summary") || "",
          stack: (el.getAttribute("data-stack") || "")
            .split(",")
            .map((s) => s.trim())
            .filter(Boolean),
          highlights: (el.getAttribute("data-highlights") || "")
            .split("\n")
            .map((s) => s.trim())
            .filter(Boolean),
          featured: el.getAttribute("data-featured") === "true",
          repo_url: el.getAttribute("data-repo") || "",
          live_url: el.getAttribute("data-live") || "",
        };
        projects.push(p);
      });

      // Build filter chips from stacks
      const filterContainer = document.getElementById("filterContainer");
      const allStacks = new Set();
      projects.forEach((p) => p.stack.forEach((s) => allStacks.add(s)));
      const stacks = Array.from(allStacks).sort((a, b) => a.localeCompare(b));
      stacks.forEach((s) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "chip";
        btn.textContent = s;
        btn.dataset.stack = s;
        btn.setAttribute("aria-pressed", "false");
        btn.addEventListener("click", () => {
          const active = btn.classList.toggle("active");
          btn.setAttribute("aria-pressed", String(active));
          applyFilters();
        });
        const check = document.createElement("span");
        check.className = "check";
        check.innerHTML = "✓";
        btn.prepend(check);
        filterContainer.appendChild(btn);
      });

      // Render
      const grid = document.getElementById("grid");
      const search = document.getElementById("search");
      const count = document.getElementById("count");

      function createCard(p) {
        const el = document.createElement("article");
        el.className = "card project-card";
        el.dataset.stack = p.stack.join(",");

        el.innerHTML = `
        <h4>${escapeHtml(p.name)}</h4>
        <div class="muted">${escapeHtml(p.summary)}</div>
        <div class="stacks">${p.stack
          .map((s) => `<span class="stack">${escapeHtml(s)}</span>`)
          .join("")}</div>
        <div style="margin-top:12px;display:flex;flex-direction:column;gap:8px;">
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            ${
              p.repo_url
                ? `<a class="chip" href="${p.repo_url}" target="_blank" rel="noopener">Repo</a>`
                : ""
            }
            ${
              p.live_url
                ? `<a class="chip" href="${p.live_url}" target="_blank" rel="noopener">Live</a>`
                : ""
            }
          </div>
          <button class="btn-more" data-name="${escapeHtml(
            p.name
          )}">View More Details</button>
        </div>
      `;

        el.querySelector(".btn-more").addEventListener("click", () =>
          openModal(p)
        );
        return el;
      }

      function render(list) {
        grid.innerHTML = "";
        if (list.length === 0) {
          grid.innerHTML =
            '<div class="muted">No projects match your filters.</div>';
          if (count) count.textContent = "0";
          return;
        }
        list.forEach((p) => grid.appendChild(createCard(p)));
        if (count) count.textContent = list.length;
      }

      function getActiveStacks() {
        return Array.from(document.querySelectorAll(".chip.active")).map(
          (b) => b.dataset.stack
        );
      }

      function applyFilters() {
        const q = search.value.trim().toLowerCase();
        const activeStacks = getActiveStacks();
        const filtered = projects.filter((p) => {
          const text = (
            p.name +
            " " +
            p.summary +
            " " +
            p.stack.join(" ")
          ).toLowerCase();
          if (q && !text.includes(q)) return false;
          if (activeStacks.length > 0) {
            // Require ALL selected stacks (AND behavior)
            return activeStacks.every((s) =>
              p.stack.map((x) => x.toLowerCase()).includes(s.toLowerCase())
            );
          }
          return true;
        });
        render(filtered);
      }

      search.addEventListener("input", () => applyFilters());

      // Modal
      const modal = document.getElementById("modal");
      const modalTitle = document.getElementById("modalTitle");
      const modalBody = document.getElementById("modalBody");
      const modalLinks = document.getElementById("modalLinks");
      document
        .getElementById("closeModal")
        .addEventListener("click", closeModal);
      modal.addEventListener("click", (e) => {
        if (e.target === modal) closeModal();
      });

      function openModal(p) {
        modalTitle.textContent = p.name;
        modalBody.innerHTML =
          `<p class="muted">${escapeHtml(p.summary)}</p>` +
          (p.highlights && p.highlights.length
            ? "<ul>" +
              p.highlights
                .map((h) => `<li class="muted">${escapeHtml(h)}</li>`)
                .join("") +
              "</ul>"
            : "");
        modalLinks.innerHTML = "";
        if (p.live_url)
          modalLinks.innerHTML += `<a class="chip" href="${p.live_url}" target="_blank" rel="noopener">Open live</a> `;
        if (p.repo_url)
          modalLinks.innerHTML += `<a class="chip" href="${p.repo_url}" target="_blank" rel="noopener">View repo</a>`;
        modal.classList.add("open");
        modal.setAttribute("aria-hidden", "false");
      }
      function closeModal() {
        modal.classList.remove("open");
        modal.setAttribute("aria-hidden", "true");
      }

      // initial render
      render(projects);

      // helper
      function escapeHtml(s) {
        return String(s || "").replace(
          /[&<>\"']/g,
          (c) =>
            ({
              "&": "&amp;",
              "<": "&lt;",
              ">": "&gt;",
              '"': "&quot;",
              "'": "&#39;",
            }[c])
        );
      }

      // Mobile nav creation + toggle (consistent with other pages)
      const toggle = document.querySelector(".menu-toggle");
      const mobileNav = document.createElement("div");
      mobileNav.id = "mobile-nav";
      mobileNav.className = "mobile-nav";
      mobileNav.innerHTML = `
      <nav style="display:flex;flex-direction:column;gap:8px">
        <a href="/">Home</a>
        <a href="about.html">About</a>
        <a href="gallery.html">Gallery</a>
        <a href="contact.html">Contact</a>
      </nav>
    `;
      document
        .querySelector(".container")
        .insertBefore(mobileNav, document.querySelector(".controls"));
      toggle.addEventListener("click", () => {
        const open = mobileNav.classList.toggle("open");
        toggle.setAttribute("aria-expanded", String(open));
      });

      // highlight current link (both navs)
      function highlightLinks(scope) {
        const links = scope.querySelectorAll("nav a[href]");
        links.forEach((a) => {
          const href = a.getAttribute("href");
          const isRoot = href === "/" || href === ".";
          const path = location.pathname;
          if (
            path.endsWith(href) ||
            (isRoot && (path === "/" || path.endsWith("/index.html")))
          ) {
            a.classList.add("active");
          }
        });
      }
      highlightLinks(document);
      highlightLinks(mobileNav);
    </script>
  </body>
</html>
